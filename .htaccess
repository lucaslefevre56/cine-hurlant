# ==========================================
# .htaccess — Réécriture d’URL moderne
# Projet : Ciné-Hurlant
# ==========================================

# 🔁 Active le moteur de réécriture d'Apache
RewriteEngine On

# 📁 Spécifie le chemin de base (à adapter selon ton dossier projet)
RewriteBase /cine-hurlant/

# 🚫 Si la ressource demandée N’EST PAS un fichier...
RewriteCond %{REQUEST_FILENAME} !-f

# ...et N’EST PAS non plus un dossier...
RewriteCond %{REQUEST_FILENAME} !-d

# 👉 ...alors je redirige tout vers index.php
# QSA = garde les paramètres GET éventuels (ex: ?page=2)
# L = stoppe les règles ici si celle-ci est appliquée
RewriteRule ^ index.php [QSA,L]

# 🛡️ Protection des fichiers sensibles (ex: .env, .gitignore, .sql...)
<FilesMatch "^(\.env|\.gitignore|\.htaccess|.*\.(ini|log|sql|bak|md|json))$">
  Require all denied
</FilesMatch>

# 🔐 Redirection automatique vers HTTPS si besoin
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
